create database QLHH;
go
use QLHH;
go

create table KHACHHANG 
(
	MAKHACHHANG VARCHAR(10) NOT NULL PRIMARY KEY,
	TENCONGTY NVARCHAR(100) NOT NULL,
	TENGIAODICH NVARCHAR(100) NOT NULL,
	DIACHI NVARCHAR(100) NOT NULL,
	EMAIL VARCHAR(20) NOT NULL,
	DIENTHOAI VARCHAR(20) NOT NULL,
	FAX VARCHAR(20) NOT NULL
);

CREATE TABLE NHANVIEN
(
	MANHANVIEN VARCHAR(10) NOT NULL PRIMARY KEY,
	HO NVARCHAR(30) NOT NULL,
	TEN NVARCHAR(10) NOT NULL,
	NGAYSINH DATE NOT NULL,
	NGAYLAMVIEC DATE NOT NULL, 
	DIACHI NVARCHAR(100) NOT NULL, 
	DIENTHOAI VARCHAR(20) NULL,
	LUONGCOBAN MONEY NOT NULL,
	PHUCAP MONEY NOT NULL
);

CREATE TABLE NHACUNGCAP
(
	MACONGTY VARCHAR(10) NOT NULL PRIMARY KEY,
	TENCONGTY NVARCHAR(100) NOT NULL,
	TENGIAODICH NVARCHAR(100) NOT NULL,
	DIACHI NVARCHAR(100) NOT NULL,
	DIENTHOAI VARCHAR(20) NOT NULL,
	FAX VARCHAR(20) NOT NULL,
	EMAIL VARCHAR(20) NOT NULL
);

CREATE TABLE LOAIHANG
(
	MALOAIHANG VARCHAR(10) NOT NULL PRIMARY KEY,
	TENLOAIHANG NVARCHAR(100) NOT NULL
);

CREATE TABLE MATHANG
(
	MAHANG VARCHAR(10) NOT NULL PRIMARY KEY,
	TENHANG NVARCHAR(100) NOT NULL,
	MACONGTY VARCHAR(10) NOT NULL,
	MALOAIHANG VARCHAR(10) NOT NULL,
	SOLUONG DECIMAL(10,2) NOT NULL,
	DONGVITINH NVARCHAR(20) NOT NULL,
	GIAHANG MONEY NOT NULL
	CONSTRAINT FK_MATHANG_NHACUNGCAP
	FOREIGN KEY (MACONGTY) REFERENCES NHACUNGCAP(MACONGTY),
	CONSTRAINT FK_MATHANG_LOAIHANG
	FOREIGN KEY (MALOAIHANG) REFERENCES LOAIHANG(MALOAIHANG)
);

CREATE TABLE DONDATHANG
(
	SOHOADON VARCHAR(10) NOT NULL PRIMARY KEY,
	MAKHACHHANG VARCHAR(10) NOT NULL,
	MANHANVIEN VARCHAR(10) NOT NULL,
	NGAYDATHANG DATETIME NULL,
	NGAYGIAOHANG DATETIME NULL, 
	NGAYCHUYENHANG DATETIME NULL,
	NOIGIAOHANG NVARCHAR(100) NULL,
	CONSTRAINT FK_DONDATHANG_KHACHHANG
	FOREIGN KEY (MAKHACHHANG) REFERENCES KHACHHANG(MAKHACHHANG),
	CONSTRAINT FK_DONDATHANG_NHANVIEN
	FOREIGN KEY (MANHANVIEN) REFERENCES NHANVIEN(MANHANVIEN)
);

CREATE TABLE CTDONHANG
(
	SOHOADON VARCHAR(10) NOT NULL,
	MAHANG VARCHAR(10) NOT NULL,
	PRIMARY KEY(SOHOADON, MAHANG),
	GIABAN MONEY NOT NULL,
	SOLUONG DECIMAL(10,2) NOT NULL, 
	MUCGIAMGIA DECIMAL(4,2) NOT NULL
	CONSTRAINT FK_CTDONHANG_DONDATHANG
	FOREIGN KEY (SOHOADON) REFERENCES DONDATHANG(SOHOADON),
	CONSTRAINT FK_CTDONHANG_MATHANG
	FOREIGN KEY (MAHANG) REFERENCES MATHANG(MAHANG)
);

GO

INSERT INTO KHACHHANG (MAKHACHHANG, TENCONGTY, TENGIAODICH, DIACHI, EMAIL, DIENTHOAI, FAX) 
VALUES
('KH001', N'Công ty TNHH A', N'A', N'123 Đường X, Quận 1, TP.HCM', 'a@example.com', '0901234567', '0281234567'),
('KH002', N'Công ty CP B', N'B', N'456 Đường Y, Quận 3, TP.HCM', 'b@example.com', '0912345678', '0282345678'),
('KH003', N'Cửa hàng C', N'C', N'789 Đường Z, Quận 5, TP.HCM', 'c@example.com', '0923456789', '0283456789'),
('KH004', N'Siêu thị D', N'D', N'10 Đường T, Quận 10, TP.HCM', 'd@example.com', '0934567890', '0284567890'),
('KH005', N'Nhà sách E', N'E', N'20 Đường U, Quận 11, TP.HCM', 'e@example.com', '0945678901', '0285678901'),
('KH006', N'Công ty F', N'F', N'30 Đường V, Quận 12, TP.HCM', 'f@example.com', '0956789012', '0286789012'),
('KH007', N'Công ty G', N'G', N'40 Đường W, Quận Tân Bình, TP.HCM', 'g@example.com', '0967890123', '0287890123');

GO

INSERT INTO NHANVIEN (MANHANVIEN, HO, TEN, NGAYSINH, NGAYLAMVIEC, DIACHI, DIENTHOAI, LUONGCOBAN, PHUCAP) VALUES
('NV001', N'Nguyễn Văn', N'A', '1990-01-01', '2015-01-01', N'123 Đường X, Quận 1, TP.HCM', '0901111111', 10000000, 1000000),
('NV002', N'Trần Thị', N'B', '1992-02-02', '2016-02-02', N'456 Đường Y, Quận 3, TP.HCM', '0912222222', 12000000, 1200000),
('NV003', N'Lê Hoàng', N'C', '1994-03-03', '2017-03-03', N'789 Đường Z, Quận 5, TP.HCM', '0923333333', 14000000, 1400000),
('NV004', N'Phạm Minh', N'D', '1996-04-04', '2018-04-04', N'10 Đường T, Quận 10, TP.HCM', '0934444444', 16000000, 1600000),
('NV005', N'Vũ Ngọc', N'E', '1998-05-05', '2019-05-05', N'20 Đường U, Quận 11, TP.HCM', '0945555555', 18000000, 1800000),
('NV006', N'Đỗ Quang', N'F', '2000-06-06', '2020-06-06', N'30 Đường V, Quận 12, TP.HCM', '0956666666', 20000000, 2000000),
('NV007', N'Hoàng Thị', N'G', '2002-07-07', '2021-07-07', N'40 Đường W, Quận Tân Bình, TP.HCM', '0967777777', 22000000, 2200000);

GO

INSERT INTO NHACUNGCAP (MACONGTY, TENCONGTY, TENGIAODICH, DIACHI, DIENTHOAI, FAX, EMAIL) VALUES
('NCC001', N'Công ty Nguyên liệu A', N'A', N'123 Đường X, Quận 1, TP.HCM', '0901111111', '0281111111', 'nla@example.com'),
('NCC002', N'Công ty Vật tư B', N'B', N'456 Đường Y, Quận 3, TP.HCM', '0912222222', '0282222222', 'vtb@example.com'),
('NCC003', N'Công ty Thiết bị C', N'C', N'789 Đường Z, Quận 5, TP.HCM', '0923333333', '0283333333', 'tbc@example.com'),
('NCC004', N'Công ty Phân phối D', N'D', N'10 Đường T, Quận 10, TP.HCM', '0934444444', '0284444444', 'ppd@example.com'),
('NCC005', N'Nhà máy Sản xuất E', N'E', N'20 Đường U, Quận 11, TP.HCM', '0945555555', '0285555555', 'sxe@example.com'),
('NCC006', N'Công ty Thương mại F', N'F', N'30 Đường V, Quận 12, TP.HCM', '0956666666', '0286666666', 'tmf@example.com'),
('NCC007', N'Công ty Dịch vụ G', N'G', N'40 Đường W, Quận Tân Bình, TP.HCM', '0967777777', '0287777777', 'dvg@example.com');

GO

INSERT INTO MATHANG (MAHANG, TENHANG, MACONGTY, MALOAIHANG, SOLUONG, DONGVITINH, GIAHANG) 
VALUES
('MH001', N'Sản phẩm A', 'NCC001', 'LH001', 100, N'cái', 100000),
('MH002', N'Sản phẩm B', 'NCC002', 'LH002', 200, N'kg', 200000),
('MH003', N'Sản phẩm C', 'NCC003', 'LH003', 300, N'm', 300000),
('MH004', N'Sản phẩm D', 'NCC001', 'LH001', 150, N'lít', 150000),
('MH005', N'Sản phẩm E', 'NCC002', 'LH002', 250, N'hộp', 250000),
('MH006', N'Sản phẩm F', 'NCC007', 'LH003', 350, N'gói', 350000),
('MH007', N'Sản phẩm G', 'NCC001', 'LH002', 350, N'gói', 350000);

GO

INSERT INTO LOAIHANG (MALOAIHANG, TENLOAIHANG) 
VALUES
('LH001', N'Giấy'),
('LH002', N'Khăn'),
('LH003', N'Túi'),
('LH004', N'Bánh'),
('LH005', N'Kẹo'),
('LH006', N'Gia dụng'),
('LH007', N'Nhựa');

GO

INSERT INTO DONDATHANG (SOHOADON, MAKHACHHANG, MANHANVIEN, NGAYDATHANG, NGAYGIAOHANG, NGAYCHUYENHANG, NOIGIAOHANG) VALUES
('DDH001', 'KH001', 'NV001', '2023-10-26 10:00:00', '2023-10-28 12:00:00', '2023-10-27 14:00:00', N'Kho A'),
('DDH002', 'KH002', 'NV002', '2023-10-27 11:00:00', '2023-10-29 13:00:00', '2023-10-28 15:00:00', N'Kho B'),
('DDH003', 'KH003', 'NV001', '2023-10-28 12:00:00', '2023-10-30 14:00:00', '2023-10-29 16:00:00', N'Kho C'),
('DDH004', 'KH004', 'NV002', '2023-10-29 13:00:00', '2023-10-31 15:00:00', '2023-10-30 17:00:00', N'Kho D'),
('DDH005', 'KH005', 'NV001', '2023-10-30 14:00:00', '2023-11-01 16:00:00', '2023-10-31 18:00:00', N'Kho E'),
('DDH006', 'KH006', 'NV002', '2023-10-31 15:00:00', '2023-11-02 17:00:00', '2023-11-01 19:00:00', N'Kho F'),
('DDH007', 'KH007', 'NV001', '2023-11-01 16:00:00', '2023-11-03 18:00:00', '2023-11-02 20:00:00', N'Kho G');

GO

INSERT INTO CTDONHANG (SOHOADON, MAHANG, GIABAN, SOLUONG, MUCGIAMGIA) VALUES
('DDH001', 'MH001', 100000, 1, 0),
('DDH001', 'MH002', 200000, 2, 0),
('DDH002', 'MH003', 300000, 3, 0),
('DDH003', 'MH004', 150000, 4, 0),
('DDH004', 'MH005', 250000, 5, 0),
('DDH005', 'MH006', 350000, 6, 0),
('DDH006', 'MH007', 450000, 7, 0);
