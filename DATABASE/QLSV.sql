CREATE DATABASE QLSV
GO
USE QLSV
GO

CREATE TABLE MONHOC
(
	MaMH VARCHAR(5) NOT NULL CONSTRAINT PK_MH PRIMARY KEY (MaMH),
	TenMH NVARCHAR(50) NOT NULL,
	SoTC SMALLINT NOT NULL
)

GO
CREATE TABLE KHOA
(
	MaKhoa VARCHAR(10) NOT NULL CONSTRAINT PK_KHOA PRIMARY KEY (MaKhoa),
	TenKHoa NVARCHAR(50) NOT NULL,
	SL_CBGD SMALLINT NOT NULL
)

GO
CREATE TABLE GIAOVIEN
(
	MaGV VARCHAR(5)	 NOT NULL CONSTRAINT PK_GV PRIMARY KEY (MaGV),
	TenGV NVARCHAR(50) NOT NULL,
	MaKhoa VARCHAR(10) 
	CONSTRAINT FK_GV FOREIGN KEY (MaKhoa) REFERENCES KHOA(MaKhoa)
)

GO
CREATE TABLE GIANGDAY
(
	MaKhoaHoc VARCHAR(5) NOT NULL CONSTRAINT PK_GD PRIMARY KEY (MaKhoaHoc),
	MaGV VARCHAR(5),
	MaMH VARCHAR(5),
	HocKy SMALLINT NOT NULL,
	Nam INT NOT NULL
	CONSTRAINT FK_GD_KHOA FOREIGN KEY (MaGV) REFERENCES GIAOVIEN(MaGV),
	CONSTRAINT FK_GD_MH FOREIGN KEY (MaMH) REFERENCES MONHOC(MaMH)
)

GO
CREATE TABLE SINHVIEN
(
	MSSV VARCHAR(5) NOT NULL CONSTRAINT PK_SV PRIMARY KEY (MSSV),
	Ten NVARCHAR(50) NOT NULL,
	GioiTinh VARCHAR(5) NOT NULL,
	DiaChi NVARCHAR(100) NOT NULL,
	DienThoai VARCHAR(20) ,
	MaKhoa VARCHAR(10)
	CONSTRAINT FK_SV FOREIGN KEY (MaKhoa) REFERENCES KHOA(MaKhoa)
)

GO

CREATE TABLE KETQUA
(
	MaSV VARCHAR(5) NOT NULL,
	MaKhoaHoc VARCHAR(5) NOT NULL,
	Diem DECIMAL(3,1)
	CONSTRAINT PK_KQ PRIMARY KEY (MaSV, MaKhoaHoc)
	CONSTRAINT FK_KQ_SV FOREIGN KEY (MaSV) REFERENCES SINHVIEN(MSSV),
	CONSTRAINT FK_KQ_GD FOREIGN KEY (MaKhoaHoc) REFERENCES GIANGDAY(MaKhoaHoc)
)

GO
INSERT INTO KHOA
VALUES
	('CNTT', N'Công nghệ thông tin', 15),
	('TOAN', N'Toán', 20),
	('SINH', N'Sinh Học', 7)

GO
INSERT INTO SINHVIEN
VALUES
	('SV001', 'BUI THUY AN', N'Nữ', '223 TRAN HUNG DAO .HCM', 0843132202, 'CNTT'),
	('SV002', 'NGUYEN THANH TUNG', N'Nam', '140 CONG QUYNH .HCM',0581525678, 'CNTT'),
	('SV003', 'NGUYEN THANH LONG', N'Nam', '112/4 CONG QUYNH .HCM', 0918345623, 'CNTT'),
	('SV004', 'HOANG THI HOA', N'Nữ', '90 NG VAN CU .HCM', 0988320123, 'CNTT'),
	('SV005', 'TRAN HONG SON', N'Nam', '54 CAO THANG .HANOI', 0928345987, 'CNTT')

GO
INSERT INTO MONHOC
VALUES

	('CSDL', 'CO SO DU LIEU', 3),
	('CTDL', 'CAU TRUC DU LIEU', 4),
	('KTLT', 'LY THUAT LAP TRINH', 5),
	('CWIN', 'LAP TRINH C TREN WINDOW', 4)


GO
INSERT INTO GIAOVIEN
VALUES
	('GV01', 'PHAM THI THAO', 'CNTT'),
	('GV02', 'LAM HOANG VU', 'TOAN'),
	('GV03', 'TRAN VAN TIEN', 'CNTT'),
	('GV04', 'HOANG CUONG', 'CNTT')

GO
INSERT INTO GIANGDAY
VALUES
	('K1', 'GV01','CSDL',1,2021),
	('K2', 'GV04','KTLT',2,2020),
	('K3', 'GV03','CTDL',1,2020),
	('K4', 'GV04','CWIN',1,2020),
	('K5', 'GV01','CSDL',1,2021)

GO
INSERT INTO KETQUA
VALUES
	('SV001','K1',8.5),
	('SV002','K3',7.0),
	('SV003','K4',7.5),
	('SV001','K2',9.0),
	('SV004','K3',6.0),
	('SV005','K3',7.0),
	('SV002','K2',7.0),
	('SV003','K3',8.5),
	('SV005','K5',7.0),
	('SV004','K4',2.0)
